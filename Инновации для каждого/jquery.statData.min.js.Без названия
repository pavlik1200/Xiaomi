!function(e){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,o,i,r){return d((a=d(d(t,e),d(o,r)))<<(s=i)|a>>>32-s,n);var a,s}function p(e,t,n,o,i,r,a){return s(t&n|~t&o,e,t,i,r,a)}function h(e,t,n,o,i,r,a){return s(t&o|n&~o,e,t,i,r,a)}function m(e,t,n,o,i,r,a){return s(t^n^o,e,t,i,r,a)}function g(e,t,n,o,i,r,a){return s(n^(t|~o),e,t,i,r,a)}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,o,i,r,a,s=1732584193,l=-271733879,u=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)l=g(l=g(l=g(l=g(l=m(l=m(l=m(l=m(l=h(l=h(l=h(l=h(l=p(l=p(l=p(l=p(i=l,u=p(r=u,c=p(a=c,s=p(o=s,l,u,c,e[n],7,-680876936),l,u,e[n+1],12,-389564586),s,l,e[n+2],17,606105819),c,s,e[n+3],22,-1044525330),u=p(u,c=p(c,s=p(s,l,u,c,e[n+4],7,-176418897),l,u,e[n+5],12,1200080426),s,l,e[n+6],17,-1473231341),c,s,e[n+7],22,-45705983),u=p(u,c=p(c,s=p(s,l,u,c,e[n+8],7,1770035416),l,u,e[n+9],12,-1958414417),s,l,e[n+10],17,-42063),c,s,e[n+11],22,-1990404162),u=p(u,c=p(c,s=p(s,l,u,c,e[n+12],7,1804603682),l,u,e[n+13],12,-40341101),s,l,e[n+14],17,-1502002290),c,s,e[n+15],22,1236535329),u=h(u,c=h(c,s=h(s,l,u,c,e[n+1],5,-165796510),l,u,e[n+6],9,-1069501632),s,l,e[n+11],14,643717713),c,s,e[n],20,-373897302),u=h(u,c=h(c,s=h(s,l,u,c,e[n+5],5,-701558691),l,u,e[n+10],9,38016083),s,l,e[n+15],14,-660478335),c,s,e[n+4],20,-405537848),u=h(u,c=h(c,s=h(s,l,u,c,e[n+9],5,568446438),l,u,e[n+14],9,-1019803690),s,l,e[n+3],14,-187363961),c,s,e[n+8],20,1163531501),u=h(u,c=h(c,s=h(s,l,u,c,e[n+13],5,-1444681467),l,u,e[n+2],9,-51403784),s,l,e[n+7],14,1735328473),c,s,e[n+12],20,-1926607734),u=m(u,c=m(c,s=m(s,l,u,c,e[n+5],4,-378558),l,u,e[n+8],11,-2022574463),s,l,e[n+11],16,1839030562),c,s,e[n+14],23,-35309556),u=m(u,c=m(c,s=m(s,l,u,c,e[n+1],4,-1530992060),l,u,e[n+4],11,1272893353),s,l,e[n+7],16,-155497632),c,s,e[n+10],23,-1094730640),u=m(u,c=m(c,s=m(s,l,u,c,e[n+13],4,681279174),l,u,e[n],11,-358537222),s,l,e[n+3],16,-722521979),c,s,e[n+6],23,76029189),u=m(u,c=m(c,s=m(s,l,u,c,e[n+9],4,-640364487),l,u,e[n+12],11,-421815835),s,l,e[n+15],16,530742520),c,s,e[n+2],23,-995338651),u=g(u,c=g(c,s=g(s,l,u,c,e[n],6,-198630844),l,u,e[n+7],10,1126891415),s,l,e[n+14],15,-1416354905),c,s,e[n+5],21,-57434055),u=g(u,c=g(c,s=g(s,l,u,c,e[n+12],6,1700485571),l,u,e[n+3],10,-1894986606),s,l,e[n+10],15,-1051523),c,s,e[n+1],21,-2054922799),u=g(u,c=g(c,s=g(s,l,u,c,e[n+8],6,1873313359),l,u,e[n+15],10,-30611744),s,l,e[n+6],15,-1560198380),c,s,e[n+13],21,1309151649),u=g(u,c=g(c,s=g(s,l,u,c,e[n+4],6,-145523070),l,u,e[n+11],10,-1120210379),s,l,e[n+2],15,718787259),c,s,e[n+9],21,-343485551),s=d(s,o),l=d(l,i),u=d(u,r),c=d(c,a);return[l,u]}function u(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function o(e){var t,n,o="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=o.charAt(t>>>4&15)+o.charAt(15&t);return i}function n(e){return unescape(encodeURIComponent(e))}function i(e){return u(l(c(t=n(e)),8*t.length));var t}function r(e,t){return function(e,t){var n,o,i=c(e),r=[],a=[];for(r[15]=a[15]=void 0,16<i.length&&(i=l(i,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^i[n],a[n]=1549556828^i[n];return o=l(r.concat(c(t)),512+8*t.length),u(l(a.concat(o),640))}(n(e),n(t))}function t(e,t,n){return t?n?r(t,e):o(r(t,e)):n?i(e):o(i(e))}"function"==typeof define&&define.amd?define(function(){return t}):e.md5=t}(this),document.querySelectorAll||(document.querySelectorAll=function(e){var t,n=document.createElement("style"),o=[];for(document.documentElement.firstChild.appendChild(n),document._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);document._qsa.length;)(t=document._qsa.shift()).style.removeAttribute("x-qsa"),o.push(t);return document._qsa=null,o}),function($){"use strict";if($){var _defaultSettings,_supportsAddEventListener,_supportsAttachEvent,_supportsClassList,_isInitialized=!1,exposure=null,msf=function(){this.p=[]};msf.prototype.push=function(e){"function"!=typeof e[0]?"setDomainId"!=e[0]&&"setVars"!=e[0]||this[e[0]](e.slice(1)):e[0](e.slice(1))},msf.prototype.setVars=function(e){vars[e[0]]=e[1]},msf.prototype.setDomainId=function(e){vars.domain_id=e[0]};var _msf=new msf;_msf.p=window._msq.p;var initMsq=function(){for(i=0;i<_msf.p.length;i++)_msf.push(_msf.p[i])},vars=[];initMsq();var userAgent=navigator.userAgent.toLowerCase(),_we=window.WE||{},isApp="undefined"!=typeof WE&&-1!==userAgent.indexOf("xiaomi/miuibrowser/4.3/shop")&&-1===userAgent.indexOf("iphone"),triggerString=function(e){return _we.triggerString&&_we.triggerString(e,"")||""};LazyLoad.prototype._loopThroughElements=function(){var i,element,settings=this._settings,elements=this._elements,elementsLength=elements?elements.length:0,insideLogs=[],insideLogCodes=[],logValue="",logCodeValue="",processedIndexes=[];for(i=0;i<elementsLength;i++)element=elements[i],settings.skip_invisible&&null===element.offsetParent||_isInsideViewport(element,settings.container,settings.threshold)&&((logValue=element.getAttribute("data-log_code"))&&(insideLogs.push(logValue),(logCodeValue=element.getAttribute("onclick"))&&(logCodeValue=eval(logCodeValue.replace("_msq.push","")),5==logCodeValue.length&&insideLogCodes.push(logCodeValue[1]))),processedIndexes.push(i),element.wasProcessed=!0);for(insideLogs.length&&this._sendData(insideLogCodes.join(";"),encodeURIComponent(insideLogs.join(";")));0<processedIndexes.length;)elements.splice(processedIndexes.pop(),1),settings.callback_processed&&settings.callback_processed(elements.length);0===elementsLength&&this._stopScrollHandler()},LazyLoad.prototype._sendData=function(e,t){vars.pageid=getPcid();var n=getBaseParam(),o=getVars(),i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="//a.stat.appmifile.com/mstr.js?"+n+o+"&type=sp&logs="+e+"&log_codes="+t;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)},LazyLoad.prototype._purgeElements=function(){var e,t=this._elements,n=t.length,o=[];for(e=0;e<n;e++)t[e].wasProcessed&&o.push(e);for(;0<o.length;)t.splice(o.pop(),1)},LazyLoad.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,_addEventListener(this._settings.container,"scroll",this._handleScrollFn))},LazyLoad.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,_removeEventListener(this._settings.container,"scroll",this._handleScrollFn))},LazyLoad.prototype.handleScroll=function(){var e,t,n;this._settings&&(t=_now(),0!==(n=this._settings.throttle)?(e=n-(t-this._previousLoopTime))<=0||n<e?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(_bind(function(){this._previousLoopTime=_now(),this._loopTimeout=null,this._loopThroughElements()},this),e)):this._loopThroughElements())},LazyLoad.prototype.update=function(){this._elements=_convertToArray(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},LazyLoad.prototype.destroy=function(){_removeEventListener(window,"resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null};var defaults={propertyName:"data-stat-id",urlParam:"stat",needMap:!0,domain:".mi.com",live:!1},_Options,_Global={parentLoop:!1,sonLoop:!1,drawDataScript:"https://i01.appmifile.com/webfile/globalweb/stat/js/jquery.dataDraw.min.sgp.js?d=20181015",jquerySource:"https://i01.appmifile.com/webfile/globalweb/stat/js/jquery.min.js",re:{normalEnd:/\/(index.php|index.html|index.htm|index)$/,snapshotModalDate:/^(\/\d{10}\/)/,snapshotModalEnd:/.html$/},locationObj:{protocol:location.protocol+"//",host:location.host,pathname:location.pathname}},linksignCommon={isSnapshotModal:function(){return"file.stat.be.xiaomi.com"==location.host},hashSnapshotModal:function(){return _Global.locationObj.protocol+location.pathname.replace(_Global.re.snapshotModalDate,"").replace(_Global.re.snapshotModalEnd,"").replace(_Global.re.normalEnd,"/")},getPageHash:function(){var e=_Global.locationObj;e.pathname=e.pathname.replace(_Global.re.normalEnd,"/");var t=this.isSnapshotModal()?this.hashSnapshotModal():objectValues(e,"");return"undefined"!=typeof _STAT_HASHNAME&&""!=_STAT_HASHNAME?md5(_STAT_HASHNAME):md5(t)},isOpenCanvas:function(){return!(!_Options.needMap||!getLocationName(_Options.urlParam,"search")||"true"!=getLocationName(_Options.urlParam,"search"))},trim:function(t){try{return t.replace(/\s/g,"")}catch(e){return t}},appendStatModal:function(e){var t=linksignCommon.trim(e.attr("href"))||"";if(this.isOpenCanvas()&&-1!=t.indexOf("/")&&(-1==t.indexOf("http")||-1!=t.indexOf(_Options.domain))){_Options.urlParam;var n,o={hashName:t.split("#"),searchName:t.split("?")};if(this.isSnapshotModal()){var i=o.searchName[0].replace("https://",""),r=location.pathname.replace(_Global.re.snapshotModalDate,"").replace(_Global.re.snapshotModalEnd,"");n=location.href.replace(r,i)}else n=o.hashName[1]?o.hashName[0]+"?"+_Options.urlParam+"=true#"+o.hashName[1]:o.searchName[1]?t+"&"+_Options.urlParam+"=true":t+"?"+_Options.urlParam+"=true";e.attr("href",n)}}},loadScript=function(e,t){var n,o=document.head||document.getElementsByTagName("head")[0]||document.documentElement;(n=document.createElement("script")).async="async",n.src=e,n.onload=n.onreadystatechange=function(){n.readyState&&!/loaded|complete/.test(n.readyState)||(n.onload=n.onreadystatechange=null,o&&n.parentNode&&o.removeChild(n),n=void 0,t())},o.insertBefore(n,o.firstChild)},linkDataSign=function(){loadScript(_Global.drawDataScript,function(e,t,n){$("body").linkSigntoDraw({pageID:linksignCommon.getPageHash()})})},getLocationName=function(e,t){var n="",o=!1,i="hash"==t?location.hash:location.search,r="hash"==t?"#":"?";if(0===i.length)return n;if(0==i.indexOf(r)&&1<i.indexOf("="))for(var a=i.substring(1,i.length).split("&"),s=0;s<a.length&&!o;)0<a[s].indexOf("=")&&a[s].split("=")[0].toLowerCase()==e.toLowerCase()&&(n=a[s].split("=")[1],o=!0),s++;return n},_setAttrs=function(e,p,t){var h=$(e).hasClass("J_linksign-customize"),n=h?$(e).children():$(e).find("a"),m={page:linksignCommon.getPageHash(),point:null},g=n.length-1,f=linksignCommon.isOpenCanvas();p===t&&(_Global.parentLoop=!0),n.each(function(e,t){if("true"!=$(t).attr("data-stat-exclude")){var n=linksignCommon.trim($(t).attr("href"))||$(t).attr("data-stat-productid")||"",o=linksignCommon.trim($(t).text()),i=$(t).parent().parent().attr("class")||$(t).parent().parent().parent().attr("class")||"",r=p+""+e,a=$(t).attr("data-stat-aid"),s=$(t).attr("data-stat-pid"),l=$(t).attr("data-log_code")||"",u=(n=-1!==n.indexOf(_Options.domain)?n.split("?")[0]:n)+o+i;u=h?u+r:u,m.point=s?a+"+"+s:md5(u);var c=$(t).attr("onclick")||"",d=_trackEvent(objectValues(m,"-"),n,l)+c;$(t).attr(_Options.propertyName)||$(t).attr(_Options.propertyName,m.point).attr("onclick",d),linksignCommon.appendStatModal($(t)),!0===_Global.parentLoop&&e===g&&f&&(_Global.sonLoop=!0,linkDataSign())}})},_trackEvent=function(e,t,n){return"_msq.push(['trackEvent', '"+e+"', '"+t+"', 'pcpid']);"},objectValues=function(e,t){var n=[];if(void 0!==e)for(var o in e){var i=e[o];i=null==i||""==i?"00":i,n.push(i)}return n.join(t)};$.fn.linkSign=function(e){_Options=$.extend(defaults,e);var n=this.length-1;this.each(function(e,t){_setAttrs(this,e,n)}),exposure?exposure.update():exposure=new LazyLoad({elements_selector:".exposure"})},$(function(){$("body,.J_linksign-customize").linkSign()})}function getPcid(){var e=location.protocol+"//",t=location.host,n=location.pathname.replace(/\/(index.php|index.html|index.htm|index)$/,"/");return md5("undefined"!=typeof _STAT_HASHNAME&&""!=_STAT_HASHNAME?_STAT_HASHNAME:e+t+n)}function getCookie(e){for(var t=removeBlanks(document.cookie).split(";"),n=0;n<t.length;n++){var o=t[n].split("=");if(1<o.length&&o[0]==e)return o[1]}return""}function removeBlanks(e){for(var t="",n=0;n<e.length;n++){var o=e.charAt(n);" "!=o&&(t+=o)}return t}function getRandomNum(){return Math.round(2147483647*Math.random())}function getVistor(e){var t=getCookie("xm_vistor"),n=!0,o="",i=(new Date).getTime();if(""!==t){var r=t.split("-");2==r.length&&(o=r[0],i-r[1]<=18e5&&(n=!1))}return n&&(o=e+"_"+i),i,o}function getMstuid(){return(new Date).getTime()+"_"+Math.round(1e4*Math.random())}function uuid(e,t){var n,o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||i.length,e)for(n=0;n<e;n++)r[n]=i[0|Math.random()*t];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(o=0|16*Math.random(),r[n]=i[19==n?3&o|8:o]);return r.join("")}function getDomain(){var e=window.location.hostname.split(".");return size=e.length,"."+e[size-2]+"."+e[size-1]}function getLanguage(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage}function getVendor(){return navigator.vendor}function getPlatform(){return navigator.platform}function getScreen(){return screen.width+"*"+screen.height}function getVars(){var e="";if(vars==[])return"";for(var t in vars)e+="&"+t+"="+encodeURIComponent(vars[t]);return e}function getBaseParam(){var e=document.location.href.replace(/&/g,"|"),t=document.referrer.replace(/&/g,"|");if(t=t.toLowerCase())getRefDomain(t),getCookie("lastsource");var n=getCookie("xm_www_sid"),o=getCookie("mstuid"),i=getCookie("muuid"),r=getCookie("mucid"),a=getCookie("mutid"),s=getCookie("mstz")||"";if(""===s||s.split("|").length<3){var l=[];l[0]="",l[1]="",l[2]=getRandomNum().toString()+".0";l.join("|")}var u,c=(s=getCookie("mstz")).split("|")||[],d=(c.length,c[0]||""),p=c[1]||"",h=(u=c[2].split("."))[0],m=parseInt(u[1])+1;c[2]=u[0]+"."+m.toString();var g=c[3]||"",f=c[4]||"",_=c[5]||"",v=0,w=encodeURIComponent(t);""==w&&(_=f=""),w!=f&&e!=t?(_=f,f=w):""!=w&&(v=1),c[3]=g,c[4]=f,c[5]=_;var y=getCookie("lastsource"),L=0,S=new Date;S.setTime(S.getTime()+62208e6),""===o&&(L=1,o=getMstuid());var C=new Date;vars.curl=location.href,vars.xmv=getVistor(o),vars.v="1.4.09",void 0===vars.vuuid&&(vars.vuuid=uuid(16,32));var E=getCookie("userId"),b="";return isApp&&(E||(E=triggerString("get_encrypt_uid")),b=triggerString("get_shop_deviceid")),"mid="+(getCookie("euid")||E)+"&device_id="+b+"&phpsessid="+n+"&mstuid="+o+"&muuid="+i+"&mucid="+r+"&sessionId="+h+"&step="+m+"&new_visitor="+L+"&mstprevpid="+encodeURIComponent(d)+"&mstprev_pid_loc="+g+"&prevtarget="+p+"&lastsource="+y+"&timestamp="+C.getTime()+"&ref="+w+"&domain="+getDomain()+"&screen="+getScreen()+"&language="+getLanguage()+"&vendor="+getVendor()+"&platform="+getPlatform()+"&gu="+_+"&pu="+f+"&rf="+v+"&mutid="+a+"&muwd="+encodeURIComponent(getCookie("muwd"))}function _init(){_isInitialized||(_defaultSettings={elements_selector:"img",container:window,threshold:300,throttle:300,skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},_supportsAddEventListener=!!window.addEventListener,_supportsAttachEvent=!!window.attachEvent,_supportsClassList=!!document.body.classList,_isInitialized=!0)}function _addEventListener(e,t,n){var o;_supportsAddEventListener?e.addEventListener(t,n):_supportsAttachEvent&&(e.attachEvent("on"+t,(o=e,function(){n.call(o,window.event)})),e=null)}function _removeEventListener(e,t,n){_supportsAddEventListener?e.removeEventListener(t,n):_supportsAttachEvent&&e.detachEvent("on"+t,n)}function _isInsideViewport(e,t,n){var o,i,r;function a(){return window.innerWidth||o.documentElement.clientWidth||document.body.clientWidth}function s(e){return e.getBoundingClientRect().top+i-o.documentElement.clientTop}function l(e){return e.getBoundingClientRect().left+r-o.documentElement.clientLeft}return o=e.ownerDocument,i=window.pageYOffset||o.body.scrollTop,r=window.pageXOffset||o.body.scrollLeft,!((t===window?(window.innerHeight||o.documentElement.clientHeight||document.body.clientHeight)+i:s(t)+t.offsetHeight)<=s(e)-n||(t===window?i:s(t))>=s(e)+n+e.offsetHeight||(t===window?a()+window.pageXOffset:l(t)+a())<=l(e)-n||(t===window?r:l(t))>=l(e)+n+e.offsetWidth)}function _now(){return(new Date).getTime()}function _merge_objects(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o}function _convertToArray(t){try{return Array.prototype.slice.call(t)}catch(e){var n,o=[],i=t.length;for(n=0;n<i;n++)o.push(t[n]);return o}}function _bind(e,t){return function(){return e.apply(t,arguments)}}function LazyLoad(e){_init(),this._settings=_merge_objects(_defaultSettings,e),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=_bind(this.handleScroll,this),_addEventListener(window,"resize",this._handleScrollFn),this.update()}function getRefDomain(e){var t=document.createElement("a");return t.href=e,t.hostname}}(window.jQuery||window.Zepto);